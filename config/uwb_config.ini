# File: config/uwb_config.ini
# UWB Path Follower Configuration - Enhanced version

# Base station pose (world)
base_x = 0.0
base_y = 0.0
base_z = 1.2
base_yaw = 0.0

# Tag mounting on robot (lever arm)
lever_x = 0.0
lever_y = 0.15
lever_z = 0.0
tag_yaw_offset = 0.0

# Fusion gains
k_pos = 0.1
k_yaw = 0.15

# Innovation gates
max_pos_innov = 0.5
max_yaw_innov = 0.3
max_pos_rate = 0.2
max_yaw_rate = 0.5

# Spherical gates
uwb_r_gate = 1.0
uwb_beta_gate = 0.5
uwb_alpha_gate = 0.3
uwb_gamma_gate = 0.5

# Path
path_length = 5.0
wp_tolerance = 0.2

# UWB quality / latency
uwb_min_quality = 0.7
uwb_max_latency = 0.1

# ZUPT
zupt_foot_thresh = 10.0
zupt_vel_thresh = 0.05
zupt_gyro_thresh = 0.05
zupt_bias_gain = 0.02

# [controller] - Enhanced control parameters
enter_tol_deg = 15
exit_tol_deg = 25
w_min = 0.65
w_max = 1.20
v_min = 0.20
v_nom = 0.35
k_turn = 1.0
err_alpha = 0.25
lp_tau = 0.25

# [heading_fusion] - Displacement-based heading fusion
k_uwb = 0.12
disp_window_sec = 0.6
disp_min_m = 0.05

# Control behavior
kp_cross = 1.0
kp_heading = 0.8
stall_check_time = 2.0
probe_distance = 0.25
probe_speed = 0.25